📘 사용 가능한 언어
- [English](./README.en.md)
- [한국어](./README.ko.md)

# 소개

이 저장소는 제가 ComfyUI 작업을 하면서 발생한 다양한 필요를 해결하기 위해 직접 제작한 커스텀 노드들을 모아둔 곳입니다.
이 노드들은 주로 **Qwen-Image**, **Flux**, **WAN** 모델을 사용하는 저의 개인적인 워크플로우에 맞춰 설계되었습니다.
다른 모델과 함께 사용할 경우 예상치 못한 문제가 발생할 수 있습니다.

# 노드 설명

## 🎬 DINKI Video Tools (비디오 도구)
![Preview](resource/DINKI_comparer.gif)
![Preview](resource/DINKI_comparer.png)
[Image_Comparison_Video_with_Overlays.json 다운로드](sample_workflows/Image_Comparison_Video_with_Overlays.json)

**전/후(Before/After) 비교 슬라이딩 애니메이션**을 생성하고, 이를 ComfyUI 워크플로우 내에서 **직접 재생**할 수 있도록 설계된 종합 노드 세트입니다.

#### ✨ 주요 기능

* **다이내믹 비교 생성기 (Dynamic Comparison Generator):**
    * **슬라이딩 애니메이션:** 두 이미지(기본 vs 타겟) 사이를 훑고 지나가는 전문적인 "스캐너 스타일"의 애니메이션을 생성합니다.
    * **스마트 리사이징:** 입력된 이미지의 종횡비를 자동으로 감지합니다. 설정한 `max_width`나 `max_height`를 초과할 때만 이미지를 축소하여, **검은 여백(레터박스)이나 잘림 현상을 방지**합니다.
    * **다중 포맷 지원:** 영상 편집을 위한 고화질 **MP4** 또는 웹 공유를 위한 **GIF / Animated WebP**로 내보낼 수 있습니다.
* **통합 비디오 플레이어 (Integrated Video Player):**
    * **그래프 상 재생:** 외부 플레이어를 열지 않고도 생성된 결과를 노드 그래프 내에서 즉시 재생합니다.
    * **캔버스 동기화:** 플레이어 오버레이가 노드의 위치와 줌 레벨을 실시간으로 추적하여 따라다닙니다.
    * **포맷 자동 감지:** MP4/MOV용 비디오 태그와 GIF/WebP용 이미지 태그를 매끄럽게 처리합니다.
* **애니메이션 제어:**
    * **정밀한 타이밍:** `sweep_duration`(움직임 속도)과 `pause_duration`(시작/끝 정지 시간)을 완벽하게 사용자 정의할 수 있습니다.
    * **반복 설정:** 특정 반복 횟수를 설정하거나 무한 반복(GIF/WebP용)을 설정할 수 있습니다.

#### 💡 사용 팁: 스마트 해상도 (Smart Resolution)
입력 이미지의 **원본 품질과 해상도를 유지**하려면:
1. `max_width`와 `max_height`를 모두 **0**으로 설정하세요.
2. 노드는 `image_a`의 정확한 크기를 소스 해상도로 사용합니다.
3. 파일 크기를 줄이기 위해 픽셀 제한(예: 1920)을 명시적으로 설정한 경우에만 이미지 크기가 조정됩니다.


#### 🎛️ 입력 매개변수 (DINKI Image Comparer MOV)

| 매개변수 | 설명 |
| :--- | :--- |
| **image_a / image_b** | 비교하려는 두 이미지(전 & 후)를 연결합니다. |
| **max_width/height** | 최대 출력 크기를 제한합니다. 원본 해상도를 유지하려면 **0**으로 설정하세요. |
| **sweep_duration** | 구분선이 이미지를 가로지르는 데 걸리는 시간(초)입니다. |
| **pause_duration** | 애니메이션이 시작과 끝부분에서 멈춰 있는 시간(초)입니다. |
| **fps** | 초당 프레임 수입니다. 값이 높을수록 움직임이 더 부드러워집니다. |
| **format** | 출력 형식을 선택합니다: `mp4`, `gif`, 또는 `webp`. |
| **quality** | 압축 품질 (1-100). |
| **loops** | GIF/WebP의 반복 횟수 (0 = 무한). |

#### 📺 입력 매개변수 (DINKI Video Player)

| 매개변수 | 설명 |
| :--- | :--- |
| **filename** | **Image Comparer** 노드에서 출력된 `filename` 문자열을 여기에 연결합니다. |


---


## 🖼️ DINKI Overlay (오버레이)
![Preview](resource/DINKI_Overlay.png?v=2)

생성된 이미지에 **워터마크, 저작권 텍스트, 자막, 로고 오버레이**를 전문적인 정밀도로 추가할 수 있도록 설계된 강력하고 다재다능한 노드입니다.

#### ✨ 주요 기능

* **이중 레이어 시스템:** 간단한 토글 스위치를 사용하여 **텍스트**와 **이미지** 오버레이를 동시에 또는 독립적으로 추가할 수 있습니다.
* **고급 텍스트 스타일링:**
    * **사용자 정의 폰트:** `fonts` 폴더에 있는 `.ttf` 및 `.otf` 파일을 자동으로 감지하여 드롭다운 메뉴에서 쉽게 선택할 수 있습니다.
    * **스트로크 (테두리):** 복잡한 배경에서도 잘 보이도록 텍스트에 색상이 있는 외곽선을 추가할 수 있습니다.
    * **그림자 (Drop Shadow):** 그림자 위치(오프셋), 흐림(퍼짐), 불투명도를 조정하여 깊이감을 생성합니다.
    * **멀티라인 지원:** 자동 줄 간격 처리가 되어 있어 자막이나 긴 저작권 문구에 적합합니다.
* **정밀한 위치 조정:** **7가지 프리셋 위치**(예: 좌측 상단, 하단 중앙, 중앙 등) 중에서 선택하고 퍼센트 기반의 **여백(margins)**으로 미세 조정할 수 있습니다.
* **적응형 크기 조정:** 소스 이미지 크기에 상대적인 비율(%)로 텍스트와 로고의 크기를 조정하여, 다양한 해상도(SDXL, Flux 등)에서도 일관된 결과를 얻을 수 있습니다.
* **투명도 제어:** **알파/마스크**(투명 PNG)를 완벽하게 지원하며 텍스트와 이미지 모두 불투명도(0-100%)를 조절할 수 있습니다.

#### 📂 사용자 정의 폰트 추가 방법
1. 노드 디렉토리로 이동합니다: `~/ComfyUI/custom_nodes/ComfyUI-DINKIssTyle/fonts/`
2. `.ttf` 또는 `.otf` 폰트 파일을 이 폴더에 붙여넣으세요.
3. ComfyUI를 다시 시작하면 **`font_name`** 드롭다운 목록에 폰트가 자동으로 나타납니다.

#### 💡 투명 PNG(로고) 사용 팁
투명 배경이 있는 로고를 제대로 오버레이하려면:
1. **Load Image** 노드의 `IMAGE` 출력을 `overlay_image`에 연결합니다.
2. `MASK` 출력을 `overlay_mask`에 연결합니다.
3. *(선택 사항)* `overlay_opacity` 슬라이더를 사용하여 로고를 배경과 혼합합니다.

#### 🎛️ 입력 매개변수

| 매개변수 | 설명 |
| :--- | :--- |
| **font_name** | `fonts` 폴더에서 폰트를 선택합니다. |
| **text_content** | 텍스트를 입력합니다. 여러 줄을 지원합니다(엔터키). |
| **text_opacity** | 텍스트 투명도를 조정합니다 (0-100). |
| **enable_stroke** | 텍스트 테두리를 켜거나 끕니다. 색상과 두께를 설정합니다. |
| **enable_shadow** | 그림자 효과를 켜거나 끕니다. 오프셋(X/Y), 퍼짐(흐림), 불투명도를 조정합니다. |
| **overlay_mask** | (선택 사항) 투명 PNG 로고를 지원하려면 여기에 마스크를 연결하세요. |



---

## DINKI Color Nodes (색상 노드)
![Preview](resource/DINKI_Color.png)

#### DINKI Auto Adjustment Node (자동 보정 노드)
**DINKI Auto Adjustment** 노드는 다음과 같은 자동 보정 기능을 구현합니다:
- **자동 톤 (Auto Tone)**
- **자동 대비 (Auto Contrast)**
- **자동 색상 (Auto Color)**
- **자동 피부 톤 (Auto Skin Tone)**

#### DINKI Adobe XMP Node
**DINKI Adobe XMP** 노드는 **Adobe Lightroom** 및 **Adobe Camera Raw**의 프리셋을 적용합니다.
현재 지원되는 조정 항목은 다음과 같습니다:

- **노출 (Exposure)**
- **대비 (Contrast)**
- **채도 (Saturation)**
- **활기 (Vibrance)**
- **톤 커브 (Tone Curve)** (마스터 커브 + RGB 채널)
- **HSL** (색조 / 채도 / 휘도)
- **비네팅 (Vignette)**
- **그레인 (Grain)**
XMP 프리셋 파일은 다음 위치에 두어야 합니다: **~/ComfyUI/input/adobe_xmp**


#### DINKI Color LUT Node
**DINKI Color LUT** 노드는 **.cube** 형식의 컬러 LUT를 적용합니다.
LUT 파일은 다음 위치에 두어야 합니다: **~/ComfyUI/input/luts**

#### DINKI AI Oversaturation Fix (AI 과채도 수정)
AI 생성 이미지에서 종종 발생하는 과도한 채도나 색상 왜곡을 줄여줍니다.

---

## 🎚️ DINKI Node Switch (노드 스위치)
![Preview](resource/DINKI_Node_Switch.gif)
워크플로우를 위한 **리모컨** 역할을 하는 논리 유틸리티 노드입니다. 간단한 스위 하나로 여러 대상 노드의 **Bypass(비활성화) 상태를 동시에 토글**할 수 있습니다.

복잡한 워크플로우에서 "제어 패널(Control Panel)"을 만드는 데 적합하며, 개별 노드를 일일이 찾을 필요 없이 전체 섹션(업스케일링, Face Detailer, LoRA 스택 등)을 켜거나 끌 수 있습니다.

#### ✨ 주요 기능

* **원격 제어:** 그래프 내 모든 노드의 상태를 한곳에서 관리합니다.
* **일괄 토글:** 쉼표로 구분된 노드 ID 목록(예: `10, 15, 23`)을 입력하여 여러 노드를 한 번에 제어합니다.
* **워크플로우 최적화:** 초기 테스트 중에는 무거운 처리 단계(예: high-res fix)를 쉽게 비활성화하고, 최종 렌더링 시 클릭 한 번으로 다시 활성화할 수 있습니다.
* **프론트엔드 통합:** ComfyUI 그래프 인터페이스와 직접 상호작용하여 노드를 시각적으로 음소거/해제합니다.

#### 💡 사용 방법
1. **노드 ID 찾기:** ComfyUI 설정에서 **"Show Node ID on Node"**를 활성화합니다(또는 노드를 우클릭 > Properties에서 ID 확인).
2. **ID 입력:** 제어하려는 노드의 ID를 `node_ids` 필드에 입력합니다 (예: `5, 12, 44`).
3. **토글:**
    * **On (True):** 대상 노드가 **활성화 (Enabled)** 됩니다.
    * **Off (False):** 대상 노드가 **바이패스 (Bypassed/Muted)** 됩니다.

### 🎛️ 입력

| 매개변수 | 설명 |
| :--- | :--- |
| **node_ids** | 쉼표로 구분된 노드 ID 문자열입니다 (예: `1,2,3`). |
| **active** | 마스터 스위치입니다. 정의된 노드들의 바이패스 상태를 토글합니다. |


---

## 📸 DINKI Photo Specifications (사진 규격)
![Preview](resource/DINKI_photo_specifications.png)

목표 **메가픽셀**과 **현실 세계의 표준 종횡비**를 선택하여 AI 생성에 가장 **최적화된 해상도**를 계산해 주는 스마트 유틸리티 노드입니다.

수동으로 픽셀을 입력하는 번거로움을 없애줍니다. 이 노드는 SDXL, Flux, Z-Image Turbo와 같은 모델에 딱 맞는 크기로 이미지가 생성되도록 보장합니다.

### ✨ 주요 기능

* **현실 세계 표준:** 표준 **사진** 비율(3:4, 4:6)부터 전문적인 **영화/시네마** 규격(아카데미, 아이맥스, 슈퍼 35)까지 다양한 형식을 지원합니다.
* **AI 최적화:** 가로와 세로 값을 자동으로 **8의 배수**로 조정하여 인코딩 오류를 방지하고 잠재 확산(latent diffusion) 모델과의 호환성을 보장합니다.
* **메가픽셀 타겟팅:** 모델의 용량에 맞춰 **1MP에서 4MP** 사이에서 선택할 수 있습니다 (기본: 1MP = 1024x1024). 다양한 종횡비에서도 전체 픽셀 면적을 보존하여 일관된 품질을 유지합니다.
* **즉각적인 방향 전환:** 재계산할 필요 없이 **세로(Portrait)**와 **가로(Landscape)** 모드를 쉽게 전환할 수 있습니다.

#### 💡 워크플로우 팁
저는 이 노드가 특히 **Z-Image Turbo** 워크플로우에서 효율적인 해상도로 빠른 생성을 보장하는 데 매우 유용하다는 것을 발견했습니다.


#### 🎛️ 지원 형식

| 카테고리 | 종횡비 |
| :--- | :--- |
| **Photo (사진)** | 3:4, 3.5:5, 4:6, 5:7, 6:8, 8:10, 10:13, 10:15, 11:14 |
| **Cinema (영화)** | 35mm Academy (1.37:1), 35mm Flat (1.85:1), 35mm Scope (2.39:1) |
| **Premium (프리미엄)** | 70mm Todd-AO (2.20:1), IMAX 70mm (1.43:1) |
| **Super (슈퍼)** | Super 35 (1.85:1 / 2.39:1), Super 16 (1.66:1 / 1.78:1) |

#### 📤 출력
* **width (INT):** 계산된 가로 길이 (8의 배수).
* **height (INT):** 계산된 세로 길이 (8의 배수).
* **info_string (STRING):** 현재 설정 요약 (예: `896x1152 (Photo 3.5:5, 1MP)`).


---



## 🤖 DINKI LM Studio Assistant
**DINKI LM Studio Assistant**는 ComfyUI를 **LM Studio**에 직접 연결해 주는 강력한 브리지 노드입니다. 이를 통해 이미지 캡션 작성, 프롬프트 개선, 창의적인 글쓰기와 같은 작업에 로컬 대규모 언어 모델(LLM)과 비전 언어 모델(VLM)을 워크플로우 내에서 사용할 수 있습니다.

### ✨ 주요 기능

* **멀티모달 기능:** **텍스트-투-텍스트(Text-to-Text)**와 **이미지-투-텍스트(Image-to-Text, 비전)** 생성을 모두 지원합니다.
* **로컬 & 프라이버시:** API 키나 인터넷 연결 없이 LM Studio 서버를 통해 로컬 머신에서 전적으로 실행됩니다.
* **배치 지원:** 이미지 배치를 자동으로 처리하여 분석을 위해 각 이미지를 LLM에 개별적으로 전송합니다.
* **메모리 관리:** LLM 작업이 완료된 후 Stable Diffusion 생성을 위해 VRAM을 확보하는 `auto_unload` 기능이 포함되어 있습니다.
* **유연한 제어:** `temperature`, `max_tokens`, `system_prompt`와 같은 LLM 매개변수에 완전히 접근할 수 있습니다.

### 🚀 작동 모드

#### 1. 비전 모드 (이미지 + 텍스트)
**이미지가 연결되어 있을 때**, 노드는 비전 어시스턴트로 작동합니다.
* 이미지는 사용자의 `user_prompt`와 함께 LLM으로 전송됩니다.
* **사용 사례:** LM Studio에서 비전 모델(예: Qwen3-VL, Gemma3)을 연결하여 이미지 캡션을 작성하거나, 스타일을 설명하거나, 구도를 분석합니다.
* *참고: `user_prompt`가 비어 있으면 LLM은 기본적으로 "이미지를 설명하세요(Describe the images)."로 동작합니다.*

![Preview](resource/DINKI_LM_Studio_Assistant_01.png)

#### 2. 텍스트 모드 (텍스트 전용)
**이미지가 연결되어 있지 않을 때**, 노드는 순수 텍스트 생성기로 작동합니다.
* 오직 `user_prompt`와 `system_prompt`만을 기반으로 텍스트를 생성합니다.
* **사용 사례:** 프롬프트 확장, 스타일 생성, 창의적인 글쓰기.

![Preview](resource/DINKI_LM_Studio_Assistant_02.png)

#### 3. 패스스루(Passthrough) 모드
`assistant_enabled`를 **False**로 설정하면, 노드는 LLM을 완전히 건너뛰고 원본 `user_prompt`를 그대로 출력합니다. 이는 노드를 제거하지 않고 A/B 테스트를 할 때 유용합니다.

![Preview](resource/DINKI_LM_Studio_Assistant_03.png)


### 🛠️ 필수 조건 및 설정

1. **LM Studio 설치:** [LM Studio](https://lmstudio.ai/)를 다운로드하여 설치하세요.
2. **모델 로드:**
    * **텍스트 전용:** 아무 LLM이나 로드하세요 (Llama 3, Mistral 등).
    * **비전용:** 비전 기능이 있는 모델을 로드하세요 (예: `Qwen-VL`, `LLaVA`, `BakLLaVA`).
3. **로컬 서버 시작:**
    * LM Studio에서 **Local Server** 탭(양방향 화살표 아이콘 <->)으로 이동합니다.
    * **Start Server**를 클릭합니다.
    * 포트가 노드 설정과 일치하는지 확인하세요 (기본값: `1234`).

### 🎛️ 매개변수 가이드

| 매개변수 | 설명 |
| :--- | :--- |
| **assistant_enabled** | 마스터 토글. `False`이면 LLM을 호출하지 않고 입력 텍스트를 출력으로 직접 전달합니다. |
| **ip_address** | LM Studio 서버의 IP (기본값: `127.0.0.1`). |
| **port** | LM Studio 서버의 포트 (기본값: `1234`). |
| **model_key** | 모델 식별자 문자열 (예: `qwen/qwen3-vl-8b`). LM Studio 버전에 따라 일반적인 값으로 두어도 되는 경우가 많습니다. |
| **system_prompt** | AI의 페르소나를 정의합니다 (예: "당신은 프롬프트 엔지니어입니다..."). |
| **user_prompt** | 구체적인 지시사항이나 질문입니다. |
| **max_tokens** | 생성된 응답의 최대 길이입니다. |
| **temperature** | 창의성 제어 (0.0 = 정확/결정적, 1.0+ = 창의적/무작위). |
| **auto_unload** | `True`인 경우 생성 후 VRAM에서 모델을 언로드하도록 요청합니다. VRAM이 제한된 GPU에 필수적입니다. |
| **unload_delay** | 모델을 언로드하기 전 대기할 시간(초)입니다 (`auto_unload`가 True인 경우). |


## 📚 DINKI Batch Images

여러 개의 개별 이미지를 **단일 이미지 배치로 결합**하도록 설계된 스마트 유틸리티 노드입니다.

이미지 크기가 다르면 에러를 뿜는 일반적인 배치 노드와 달리, 이 노드는 들어오는 모든 이미지를 **첫 번째 이미지의 해상도에 맞춰 자동으로 리사이즈**하여 매끄러운 배치 처리를 보장합니다.

#### ✨ 주요 기능

* **대량 입력:** 한 번에 최대 **10개의 다른 이미지**를 연결할 수 있습니다.
* **자동 리사이즈:** 모든 이미지를 **첫 번째 입력 이미지**의 크기(가로/세로)에 맞춰 자동으로 조정합니다. 더 이상 "Shape Mismatch" 오류가 발생하지 않습니다!
* **모드 전환:** 배치를 생성할지 아니면 테스트를 위해 첫 번째 이미지만 통과시킬지 쉽게 전환할 수 있습니다.

#### 💡 워크플로우 팁
이 노드는 **DINKI LM Studio Assistant**와 완벽하게 작동합니다. 여러 참조 이미지를 함께 배치로 묶어 비전 LLM에 보내 한 번에 대량 분석이나 캡션 작업을 수행할 때 사용하세요.


### 🎛️ 매개변수

| 매개변수 | 설명 |
| :--- | :--- |
| **batch_image** | **True (다중):** 연결된 모든 이미지를 리사이즈하고 병합하여 하나의 배치로 만듭니다.<br>**False (단일):** 나머지는 무시하고 발견된 첫 번째 이미지만 출력합니다 (패스스루 모드). |
| **image1 ~ 10** | 이미지를 여기에 연결합니다. 입력은 비워둘 수 있으며, 노드가 활성 연결을 자동으로 감지합니다. |

---



### 📐 DINKI Resize and Pad Image / Remove Pad

이 두 노드 쌍은 종횡비 변화나 해상도 리사이징에 민감한 이미지 편집 모델(예: **Qwen Image Edit**)을 사용하는 워크플로우에 필수적입니다.

**1. DINKI Resize and Pad Image**
입력 이미지를 목표 정사각형 해상도(기본 **1024×1024**)에 맞게 리사이즈하면서 *원본 종횡비를 유지*합니다. 남는 공간을 채우기 위해 자동으로 패딩(레터박스)을 추가합니다.

**2. DINKI Remove Pad from Image**
처리된 이미지와 첫 번째 노드의 `PAD_INFO`를 받아 패딩을 잘라내어 **정확한 원본 종횡비**로 복원합니다.

#### 💡 왜 사용하나요?
이 워크플로우는 Qwen Image Edit과 같은 모델에서 **픽셀 시프팅 아티팩트(깨짐)** 및 왜곡을 방지합니다. 생성 과정 내내 피사체의 원래 비율을 유지하여 프롬프트 기반 편집 요청이 최대한 정확하게 처리되도록 보장합니다.

#### 비교
**Resize and Pad 미사용 (왜곡/밀림):**
![Preview](resource/DINKI_Resize_and_Pad_Image_02.png)

**DINKI Resize and Pad 사용 (정확함):**
![Preview](resource/DINKI_Resize_and_Pad_Image_01.png)

#### 🎛️ 매개변수 가이드

**DINKI Resize and Pad Image**
| 매개변수 | 설명 |
| :--- | :--- |
| **target_size** | 정사각형 캔버스의 목표 해상도(예: 1024). 이미지의 긴 쪽이 이 크기에 맞춰집니다. |
| **resize_and_pad** | **True:** 리사이징과 패딩을 적용합니다.<br>**False:** 노드를 우회합니다 (원본 이미지 반환). |
| **upscale_method** | 리사이징에 사용되는 알고리즘 (lanczos, bicubic, area, nearest). |

**DINKI Remove Pad from Image**
| 매개변수 | 설명 |
| :--- | :--- |
| **pad_info** | *Resize and Pad* 노드의 `PAD_INFO` 출력을 여기에 연결합니다. 크로핑 메타데이터가 포함되어 있습니다. |
| **latent_scale** | (선택 사항) **DINKI Upscale Latent By**의 `latent_scale` 출력을 연결합니다. <br>이미지가 라텐트 공간에서 업스케일링된 경우(예: High-Res Fix 중)에도 올바르게 크로핑할 수 있습니다. |
| **remove_pad** | **True:** 패딩을 잘라냅니다.<br>**False:** 입력 이미지를 그대로 반환합니다. |

---

## 🔀 DINKI Cross Output Switch

A/B 테스트나 라우팅 로직을 위한 간단하지만 유용한 유틸리티입니다. 부울(Boolean) 토글을 기반으로 두 입력 이미지를 서로 맞바꿉니다.

#### 🎛️ 매개변수 가이드

| 매개변수 | 설명 |
| :--- | :--- |
| **image_1 / image_2** | 서로 바꿀 두 입력 이미지입니다. |
| **invert** | **False:** 출력 1 = 이미지 1, 출력 2 = 이미지 2.<br>**True:** 출력 1 = 이미지 2, 출력 2 = 이미지 1 (교체됨). |

---

## ▦ DINKI Grid
![Preview](resource/DINKI_Grid.gif)

최대 **10장의 이미지**를 사용자 정의 가능한 그리드 레이아웃으로 컴파일하는 필수 ComfyUI 노드입니다. 비교 시트, 스토리보드 또는 정리된 이미지 갤러리를 만드는 데 완벽합니다.

#### ✨ 주요 기능

* **유연한 매트릭스 레이아웃:** **열(Columns)**과 **행(Rows)**을 설정하여 나만의 그리드 구조를 정의합니다(예: 2x3, 4x4). 이미지는 왼쪽에서 오른쪽, 위에서 아래 순서로 채워집니다.
* **스마트 해상도 처리:**
    * **기본 해상도:** 그리드 셀 크기는 **이미지 1**의 해상도에 의해 자동으로 결정됩니다.
    * **적응형 리사이징:** 후속 이미지들은 **맞춤(Fit)**, **크롭(Crop)**, **늘리기(Stretch)** 등의 방법을 사용하여 셀에 맞게 자동으로 조정됩니다.
* **업스케일 비교 모드:**
    * **리사이즈 없음 - 좌측 상단 (No Resize):** 이미지를 리사이징하지 않고 원본 배율 그대로 배치하는 특수 모드입니다. **업스케일된 이미지 vs 원본** 이미지를 나란히 놓고 디테일 향상을 시각적으로 비교할 때 이상적입니다.
* **사용자 정의 스타일링:**
    * **프레임:** 조정 가능한 **프레임 두께(Frame Thickness)**로 이미지 사이에 간격을 추가합니다 (0으로 설정 시 틈 없는 그리드 지원).
    * **배경:** 프레임과 빈 셀의 배경 색상(Hex 코드)을 사용자 정의합니다.
* **출력 최적화:**
    * **크기 제한:** `limit_output`을 토글하여 거대한 파일 생성을 방지합니다. 최종 그리드의 종횡비를 유지하면서 `max_width` / `max_height` 이내로 자동으로 축소합니다.

#### 💡 레이아웃 로직 예시
그리드를 **2열 × 3행** (총 6셀)으로 설정했지만 **5장의 이미지**만 연결한 경우:
1. 이미지 1-2가 1행을 채웁니다.
2. 이미지 3-4가 2행을 채웁니다.
3. 이미지 5가 3행의 첫 번째 슬롯을 채웁니다.
4. 마지막 빈 슬롯은 지정한 **배경색**으로 채워집니다.


#### 🎛️ 입력 매개변수

| 매개변수 | 설명 |
| :--- | :--- |
| **image_1 ~ 10** | 최대 10개의 이미지를 연결합니다. 연결되지 않은 슬롯은 무시됩니다. |
| **cols / rows** | 그리드의 열과 행 개수를 설정합니다. |
| **frame_thickness** | 각 이미지 주변의 테두리 너비(픽셀 단위)입니다. 틈을 없애려면 0으로 설정하세요. |
| **bg_color_hex** | 배경/프레임의 16진수 색상 코드입니다 (예: `#000000`, `#FFFFFF`). |
| **resize_method** | 이미지를 셀에 맞추는 방법을 선택합니다: `Fit`, `Crop`, `Stretch`, 또는 `No Resize`. |
| **limit_output** | 최종 이미지의 최대 픽셀 크기를 제한하려면 활성화하세요. |
| **max_output_w/h** | 제한이 활성화된 경우 허용되는 최대 너비/높이입니다. |

---

## 👁️ DINKI Image Preview

빈 신호를 우아하게 처리하는 강력한 미리보기 노드입니다. 이미지가 제공되지 않은 경우(예: 스위치로 인해 건너뛴 단계), 오류를 표시하거나 충돌하는 대신 텍스트가 포함된 **사용자 정의 플레이스홀더 이미지**를 자동으로 생성합니다.

![Preview](resource/DINKI_Image_Preview.png)

#### 🎛️ 매개변수 가이드

| 매개변수 | 설명 |
| :--- | :--- |
| **images** | (선택 사항) 이미지를 여기에 연결합니다. 연결이 끊겼거나 없으면 플레이스홀더가 표시됩니다. |
| **placeholder_text** | 플레이스홀더에 표시할 텍스트입니다 (예: "Bypassed"). |
| **width / height** | 플레이스홀더 이미지의 크기입니다. |
| **bg_gray / fg_gray** | 배경 및 텍스트 밝기 (0-255 그레이스케일). |
| **font_path** | 사용자 정의 .ttf 파일 경로입니다. 비어 있으면 시스템 폰트를 찾으려고 시도합니다. |

---

## 📝 DINKI CSV Prompt Selector (Live)

자주 사용하는 프롬프트나 LoRA 트리거를 드롭다운 메뉴에서 선택하여 빠르게 삽입할 수 있습니다.

* **설정:** ComfyUI **`input`** 폴더 안에 **`prompt_list.csv`**라는 파일을 만드세요.
* **CSV 형식:** `제목, 프롬프트 텍스트`
    ```csv
    LoRA - ToonWorld, ToonWorld
    LoRA - Photo to Anime, transform into anime
    ```
* **실시간 업데이트:** 노드는 실행될 때마다 CSV 파일에서 목록을 자동으로 새로 고침합니다.

#### 🎛️ 매개변수 가이드

| 매개변수 | 설명 |
| :--- | :--- |
| **title** | CSV 파일에 정의된 키/제목을 선택합니다. 노드는 해당 프롬프트 텍스트를 출력합니다. |

---

## ⬆️ DINKI Upscale Latent By

유연성과 파이프라인 통합을 위해 설계된 향상된 라텐트 업스케일링 노드입니다. 홀수 해상도 오류를 방지하기 위한 "Snap to Multiple(배수로 맞춤)" 기능이 특징입니다.

#### 🎛️ 매개변수 가이드

| 매개변수 | 설명 |
| :--- | :--- |
| **scale_by** | 업스케일링 배율입니다 (예: 1.5x). |
| **snap_to_multiple** | 결과 해상도가 이 숫자의 배수가 되도록 보장합니다 (기본값 8). VAE에서 "홀수 크기(odd dimension)" 오류를 방지합니다. |
| **enabled** | **True:** 업스케일링을 수행합니다.<br>**False:** 노드를 우회합니다 (원본 라텐트 반환). |
| **upscale_method** | 라텐트 보간을 위한 알고리즘 (nearest-exact, bicubic 등). |

> **출력 참고:** `latent_scale` 출력은 (스냅 적용 후) 사용된 *실제* 스케일링 팩터를 제공하며, 이를 **DINKI Remove Pad from Image**로 보낼 수 있습니다.

---

### 🧠 DINKI UNet Loader (safetensors / GGUF)

**safetensors**와 **GGUF** 모델 로딩을 하나의 노드로 결합한 간소화된 로더입니다. 이를 통해 일반 모델과 양자화된 모델 사이를 전환할 때 별도의 로더 노드를 배치하고 연결을 다시 배선할 필요가 없습니다.

![Preview](resource/DINKI_UNet_Loader.png)

#### 🎛️ 매개변수 가이드

| 매개변수 | 설명 |
| :--- | :--- |
| **use_gguf** | **True (GGUF):** `gguf_unet`에서 선택한 모델을 로드합니다.<br>**False (safetensors):** `safetensors_unet`에서 선택한 모델을 로드합니다. |
| **safetensors_unet** | `models/diffusion_models`에서 표준 모델을 선택합니다. |
| **gguf_unet** | `models/unet_gguf`에서 양자화된 모델을 선택합니다. |
